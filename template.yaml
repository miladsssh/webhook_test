AWSTemplateFormatVersion: '2010-09-09'
Transform: 'AWS::Serverless-2016-10-31'
Description: 'milad test webhook'

# Parameters
Parameters:
  FunctionName:
    Type: String
    Description: Funciton Name
    Default: my-deployment-bucket

Resources:
  miladTestWebhook:
    Type: 'AWS::Serverless::Function'
    Properties:
      Runtime: go1.x
      Handler: main
      AutoPublishAlias: live
      Tracing: Active
      FunctionName: !Join [ "", [ !Ref FunctionName, "-api-thing-get"]]
      DeploymentPreference:
        Type: AllAtOnce
      Environment:
        Variables:
          Env1: '{"REGION": "REGION_VALUE", "ENDPOINT": "http://SOME_ENDPOINT"}'
          Env2: !Ref 'FunctionName'
          MyEnvironment : stage